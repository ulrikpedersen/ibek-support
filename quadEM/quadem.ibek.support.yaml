# yaml-language-server: $schema=https://github.com/epics-containers/ibek/releases/download/1.6.2/ibek.support.schema.json

module: quadEM

defs:
  
  - name: TetrAMM
    description: |-
      TODO

    args:
      - type: str
        name: P
        description: |-
          TODO

      - type: str
        name: R
        description: |-
          TODO
          

      - type: id
        name: PORT
        description: |-
          TODO

      - type: int
        name: QSIZE
        description: |-
          TODO
        default: 10000

      - type: str
        name: IP
        description: |-
          TODO

      - type: int
        name: RingSize
        description: |-
          TODO
        default: 10000

    pre_init: 
      - value: |

          # drvAsynIPPortConfigure("portName","hostInfo",priority,noAutoConnect, noProcessEos)
          drvAsynIPPortConfigure({{PORT}}ip, {{IP}}, 100, 0, 0)

          # asynOctetSetInputEos(portName,addr,eos,drvInfo)
          asynOctetSetInputEos({{PORT}}ip, 0, "\r\n")

          # asynOctetSetOutputEos(portName,addr,eos,drvInfo)
          asynOctetSetOutputEos({{PORT}}ip, 0, "\r")

          # drvTetrAMMConfigure(portName, IPportName, RingSize)
          drvTetrAMMConfigure({{PORT}}, "{{PORT}}ip", {{RingSize}})
          


    databases:
      - file: TetrAMM.template
        args: 
          P: 
          R:

          